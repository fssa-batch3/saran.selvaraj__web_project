<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="../assets/styles/buy-now.css">
  <link rel="stylesheet" href="../assets/styles/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" />


</head>
<body>
 
  <div class="modal">
    <form class="form" id="form">
      <div class="payment--options"> 
      </div>
      <div class="credit-card-info--form">
        <div class="input_container">
          <label for="password_field" class="input_label">Card holder full name</label>
          <input id="card_holder_name" class="input_field"  type="text" name="input-name" title="Inpit title" value="saran s">
        </div>
        <div class="input_container">
          <label for="password_field" class="input_label">Card Number</label>
          <input id="card_Number" class="input_field" type="text" name="input-name" pattern="[0-9]{4}[0-9]{4}[0-9]{4}[0-9]{4}" title="Inpit title" value="9876 9876 9876 9876">
        </div>
        <div class="input_container">
          <label for="password_field" class="input_label">Expiry Date / CVV</label>
          <div class="split">
          <input id="expiry_Date" class="input_field" type="text" name="input-name" title="Expiry Date" value="01/23">
          <input id="cvv" class="input_field" type="number" name="cvv" title="CVV" value="375">
        </div>
        </div>
      </div>
        <button class="purchase--btn" type="submit" id="checkout">Checkout</button>
    </form>
    </div>
  </body>

<script>

      let urlparams = new URLSearchParams(window.location.search);
      let thisid = urlparams.get("uuid");
      let thispet = JSON.parse(localStorage.getItem("new_card")).find((e) => e.uuid == thisid);
      let check = JSON.parse(localStorage.getItem("bought_pets")).find((e) => e.uuid == thisid);

      let form = document.getElementById("form")
      form.addEventListener("submit", function(event){
        event.preventDefault();
        let card_holder_name = document.getElementById("card_holder_name").value;
        let card_number = document.getElementById("card_Number").value;
        let expiry_Date =document.getElementById("expiry_Date").value;
        let cvv = document.getElementById("cvv").value;


   
if(check == null || check == undefined ){


if (card_holder_name === "") {
  alert("Your name should not null")

}else if(card_number === "" ){
  alert("card number should not be null")
}else if(card_number < 16 ){
  alert("card number should not be less than 16")
}else if(expiry_Date === ""){
  alert("Expiry date should not be null")
}else if(cvv === ""){
  alert("Cvv should not be null")
}else if(cvv < 3){
  alert("Cvv should not be less than or greater than 3error")
}else{
   alert("Successfully bought the pet!")
   window.location.href=`./order-details-page.html?uuid=${thispet["uuid"]}`
}
}else{
alert("You have already bought this pet!")
}

     
    });

    let buy_with_emi = document.getElementById("buy_with_emi");
    buy_with_emi.addEventListener("click",function(e) {
      window.location.href="../pages/EMI.html"
    })

  </script>
  </html>

